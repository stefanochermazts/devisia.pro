---
export interface Props {
  title: string;
  description?: string;
  heroImage?: string;
  canonical?: string;
  lang?: 'it' | 'en';
}

const {
  title,
  description,
  heroImage,
  canonical = Astro.url.pathname,
  lang = 'it',
} = Astro.props;

const siteName = 'Devisia';
const fullTitle = title === 'Home' ? siteName : `${title} | ${siteName}`;
const canonicalURL = new URL(canonical, Astro.site);

const defaultDescription =
  lang === 'en'
    ? 'Devisia - Your trusted technology partner for digital innovation and business transformation.'
    : 'Devisia - Il tuo partner tecnologico per innovazione digitale e trasformazione del business.';

const metaDescription = description ?? defaultDescription;

const localePrefix = lang === 'en' ? '/en' : '';
const href = (path: string) => (localePrefix ? `${localePrefix}${path}` : path);
const homeHref = localePrefix || '/';

import '../styles/tokens.css';
import '../styles/base.css';
import '../styles/components.css';
import '../styles/utilities.css';
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Primary Meta Tags -->
    <title>{fullTitle}</title>
    <meta name="title" content={fullTitle} />
    <meta name="description" content={metaDescription} />
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={metaDescription} />
    <meta property="og:site_name" content={siteName} />
    {heroImage && <meta property="og:image" content={new URL(heroImage, Astro.site)} />}
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={fullTitle} />
    <meta property="twitter:description" content={metaDescription} />
    {heroImage && <meta property="twitter:image" content={new URL(heroImage, Astro.site)} />}
    
    <!-- Fonts (Optional: Add Google Fonts or other font services) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
  </head>
  
  <body>
    <a class="skip-link" href="#main">Skip to content</a>
    <!-- Header / Navigation -->
    <header class="site-header">
      <nav class="nav-container ds-container" aria-label="Primary">
        <div class="nav-brand">
          <a href={homeHref} class="logo">DEVISIA</a>
        </div>
        
        <ul class="nav-menu">
          <li><a href={homeHref} class="nav-link">Home</a></li>
          <li><a href={href('/about')} class="nav-link">About</a></li>
          <li><a href={href('/services')} class="nav-link">Services</a></li>
          <li><a href={href('/projects')} class="nav-link">Projects</a></li>
          <li><a href={href('/blog')} class="nav-link">Blog</a></li>
          <li><a href={href('/contact')} class="nav-link nav-link-cta">Contact</a></li>
        </ul>
      </nav>
    </header>
    
    <!-- Main Content -->
    <main id="main" class="main-content ds-container">
      <slot />
    </main>
    
    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-container ds-container">
        <div class="footer-content">
          <div class="footer-section">
            <h3>Devisia</h3>
            <p>Your trusted technology partner for digital innovation and business transformation.</p>
          </div>
          
          <div class="footer-section">
            <h4>Quick Links</h4>
            <ul class="footer-links">
              <li><a href={homeHref}>Home</a></li>
              <li><a href={href('/about')}>About</a></li>
              <li><a href={href('/services')}>Services</a></li>
              <li><a href={href('/projects')}>Projects</a></li>
              <li><a href={href('/blog')}>Blog</a></li>
              <li><a href={href('/contact')}>Contact</a></li>
            </ul>
          </div>
          
          <div class="footer-section">
            <h4>Connect</h4>
            <ul class="footer-links">
              <li><a href="mailto:info@devisia.pro">info@devisia.pro</a></li>
              <li><a href="https://github.com/stefanochermazts" target="_blank" rel="noopener noreferrer">GitHub</a></li>
              <li><a href="https://linkedin.com" target="_blank" rel="noopener noreferrer">LinkedIn</a></li>
            </ul>
          </div>
        </div>
        
        <div class="footer-bottom">
          <p>&copy; {new Date().getFullYear()} Devisia. All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
