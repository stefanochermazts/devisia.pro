---
import { Image } from 'astro:assets';
import Button from './ui/Button.astro';

export interface Props {
  lang?: 'it' | 'en';
  title: string;
  subtitle?: string | null;
  image?: string | null;
  fallbackImage?: string | null;
  primaryHref?: string;
  primaryLabel?: string;
  secondaryHref?: string;
  secondaryLabel?: string;
}

const {
  lang = 'it',
  title,
  subtitle,
  image,
  fallbackImage,
  primaryHref,
  primaryLabel,
  secondaryHref,
  secondaryLabel,
} = Astro.props;

const showActions =
  Boolean(primaryHref && primaryLabel) || Boolean(secondaryHref && secondaryLabel);
---

<section class="ds-grid" data-cols="2" aria-label="Page hero" style="container-type: inline-size; margin-bottom: var(--ds-space-8)">
  <div class="ds-stack" data-gap="sm">
    <h1 style="margin: 0; font-weight: 700">{title}</h1>
    {
      subtitle && (
        <p class="ds-muted" style="max-width: 65ch; margin: 0; font-size: var(--ds-text-sm)">
          {subtitle}
        </p>
      )
    }

    {
      showActions && (
        <div class="ds-cluster" style="margin-top: var(--ds-space-3)">
          {primaryHref && primaryLabel && (
            <Button href={primaryHref} variant="primary">
              {primaryLabel}
            </Button>
          )}
          {secondaryHref && secondaryLabel && (
            <Button href={secondaryHref} variant="secondary">
              {secondaryLabel}
            </Button>
          )}
        </div>
      )
    }
  </div>

  <div style="margin-top: var(--ds-space-4)">
    <div class="ds-card">
      {
        image || fallbackImage ? (
          <Image 
            class="ds-img-bw" 
            src={(image ?? fallbackImage) as string} 
            alt="" 
            loading="eager" 
            decoding="async" 
            fetchpriority="high"
            width={800}
            height={450}
            style="width: 100%; height: auto; display: block; aspect-ratio: 16 / 9; object-fit: cover; border-radius: var(--ds-radius-3)" 
          />
        ) : (
          <div class="ds-card__body ds-surface-2">
            <p class="ds-muted" style="margin: 0">
              {lang === 'en'
                ? 'Hero image placeholder. Add an image in the CMS to customize this area.'
                : "Segnaposto immagine hero. Aggiungi un'immagine dal CMS per personalizzare questa area."}
            </p>
          </div>
        )
      }
    </div>
  </div>
</section>
