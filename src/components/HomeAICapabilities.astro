---
import Button from './ui/Button.astro';

export interface Props {
  lang?: 'it' | 'en';
  title?: string | null;
  description?: string | null;
  items?: Array<{ title: string; description: string }> | null;
  ctaLabel?: string | null;
  ctaHref?: string | null;
}

const { lang = 'it', title, description, items, ctaLabel, ctaHref } = Astro.props;

// Default content
const defaults = {
  it: {
    title: 'Applied AI, not abstractions',
    description: 'Integriamo capacità AI in prodotti reali con controllo, affidabilità e manutenibilità. Lavoriamo con API, modelli e strumenti esistenti per costruire soluzioni concrete.',
    items: [
      {
        title: 'AI API integration',
        description: 'LLMs, embeddings, vision, speech. Integrazione diretta con provider e modelli open-source.',
      },
      {
        title: 'Prompting & orchestration',
        description: 'Prompt strutturati, routing, chain. Pattern riutilizzabili e testabili per flussi complessi.',
      },
      {
        title: 'Agent workflows',
        description: 'Tool calling, guardrails, human-in-the-loop. Sistemi che combinano automazione e controllo.',
      },
      {
        title: 'Reliability & cost control',
        description: 'Osservabilità, fallback, caching, rate limits. Monitoraggio e ottimizzazione dei costi operativi.',
      },
    ],
    ctaLabel: null,
    ctaHref: null,
  },
  en: {
    title: 'Applied AI, not abstractions',
    description: 'We integrate AI capabilities into real products with control, reliability, and maintainability. We work with existing APIs, models, and tools to build concrete solutions.',
    items: [
      {
        title: 'AI API integration',
        description: 'LLMs, embeddings, vision, speech. Direct integration with providers and open-source models.',
      },
      {
        title: 'Prompting & orchestration',
        description: 'Structured prompts, routing, chains. Reusable, testable patterns for complex flows.',
      },
      {
        title: 'Agent workflows',
        description: 'Tool calling, guardrails, human-in-the-loop. Systems that combine automation and control.',
      },
      {
        title: 'Reliability & cost control',
        description: 'Observability, fallbacks, caching, rate limits. Monitoring and optimization of operational costs.',
      },
    ],
    ctaLabel: null,
    ctaHref: null,
  },
};

const content = {
  title: title ?? defaults[lang].title,
  description: description ?? defaults[lang].description,
  items: items ?? defaults[lang].items,
  ctaLabel: ctaLabel ?? defaults[lang].ctaLabel,
  ctaHref: ctaHref ?? defaults[lang].ctaHref,
};

const localePrefix = lang === 'en' ? '/en' : '';
const href = (path: string) => (localePrefix ? `${localePrefix}${path}` : path);
---

<section class="ds-stack" data-gap="lg" style="container-type: inline-size">
  <div class="ds-grid" data-cols="2" style="container-type: inline-size; align-items: start">
    <h2 style="margin: 0">{content.title}</h2>
    <p class="ds-muted" style="margin: 0">{content.description}</p>
  </div>
  <div class="ds-grid" data-cols="2" style="container-type: inline-size; margin-top: var(--ds-space-6)">
    {content.items.map((item) => (
      <div class="ds-stack" data-gap="sm">
        <h3 style="margin: 0; font-weight: 600; font-size: var(--ds-text-md); color: var(--ds-color-text)">{item.title}</h3>
        <p style="margin: 0; font-size: var(--ds-text-sm); color: var(--ds-color-text-muted); line-height: var(--ds-leading-relaxed)">
          {item.description}
        </p>
      </div>
    ))}
  </div>
  {content.ctaLabel && content.ctaHref && (
    <div class="ds-cluster" style="margin-top: var(--ds-space-4)">
      <Button href={href(content.ctaHref)} variant="secondary">
        {content.ctaLabel}
      </Button>
    </div>
  )}
</section>
