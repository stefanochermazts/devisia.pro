<form class="ds-card ds-ai-structure__card" data-ai-structure-form>
  <div class="ds-card__body" style="display:grid; gap: var(--ds-space-3);">
    <div class="ds-field">
      <textarea
        class="ds-textarea"
        data-ai-structure-input
        rows="7"
        maxlength="1500"
        aria-label="Input"
        placeholder=""
      ></textarea>
      <p class="ds-hint">
        Scrivi come un brief tecnico: contesto, attori coinvolti, cosa deve succedere e vincoli principali.<br />
        Tono operativo (no marketing o storytelling); anche input grezzo va bene.
      </p>
    </div>

    <div class="ds-alert" data-ai-structure-error hidden>
      <p class="ds-alert__body" style="white-space: pre-wrap;"></p>
    </div>

    <div class="ds-alert" data-ai-structure-status hidden>
      <p class="ds-alert__body" style="white-space: pre-wrap;"></p>
    </div>

    <div style="display:flex; justify-content:flex-start;">
      <button type="submit" class="ds-btn" data-variant="primary" data-ai-structure-generate>
        <span data-ai-structure-generate-text>Genera struttura</span>
        <svg
          class="ds-ai-structure__spinner"
          data-ai-structure-generate-spinner
          style="display: none;"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          aria-hidden="true"
        >
          <path d="M21 12a9 9 0 1 1-6.219-8.56" />
        </svg>
        <span class="ds-ai-structure__progress" data-ai-structure-progress hidden></span>
      </button>
    </div>
  </div>
</form>

<style>
  .ds-ai-structure__card :global(.ds-card__body) {
    padding: var(--ds-space-5);
  }
  @media (max-width: 36rem) {
    .ds-ai-structure__card :global(.ds-card__body) {
      padding: var(--ds-space-4);
    }
  }
  .ds-ai-structure__spinner {
    display: inline-block;
    margin-left: var(--ds-space-2);
    animation: spin 1s linear infinite;
    vertical-align: middle;
  }
  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  button[data-ai-structure-generate] {
    display: inline-flex;
    align-items: center;
  }

  .ds-ai-structure__progress {
    margin-left: var(--ds-space-2);
    font-size: var(--ds-text-xs);
    color: color-mix(in srgb, currentColor 80%, transparent);
    line-height: 1.1;
  }
</style>

