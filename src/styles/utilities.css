@layer utilities {
  /* Layout primitives */
  .ds-container {
    width: 100%;
    max-width: var(--ds-container-max);
    margin-inline: auto;
    padding-inline: var(--ds-container-pad);
  }

  .ds-reading {
    max-width: var(--ds-reading-max);
  }

  .ds-stack {
    display: flex;
    flex-direction: column;
    gap: var(--ds-space-4);
  }

  .ds-stack[data-gap="sm"] {
    gap: var(--ds-space-2);
  }

  .ds-stack[data-gap="lg"] {
    gap: var(--ds-space-6);
  }

  .ds-cluster {
    display: flex;
    flex-wrap: wrap;
    gap: var(--ds-space-3);
    align-items: center;
  }

  .ds-grid {
    display: grid;
    gap: var(--ds-space-5);
  }

  .ds-grid[data-cols="2"] {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .ds-grid[data-cols="3"] {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .ds-grid[data-cols="4"] {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  @container (max-width: 52rem) {
    .ds-grid[data-cols="3"],
    .ds-grid[data-cols="4"] {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @container (max-width: 36rem) {
    .ds-grid[data-cols="2"],
    .ds-grid[data-cols="3"],
    .ds-grid[data-cols="4"] {
      grid-template-columns: 1fr;
    }
  }

  /* Inline utilities */
  .ds-muted {
    color: var(--ds-color-text-muted);
  }

  .ds-surface {
    background: var(--ds-color-surface);
  }

  .ds-surface-2 {
    background: var(--ds-color-surface-2);
  }

  .ds-border {
    border: var(--ds-border-1) solid var(--ds-color-border);
  }

  .ds-radius-2 {
    border-radius: var(--ds-radius-2);
  }

  .ds-shadow-1 {
    box-shadow: var(--ds-shadow-1);
  }

  .ds-pad-4 {
    padding: var(--ds-space-4);
  }
}

