---
import Layout from '../../layouts/Layout.astro';
import { getEntry, render } from 'astro:content';
import { type CollectionEntry } from 'astro:content';
import HomeHero from '../../components/HomeHero.astro';
import { breadcrumbListJsonLd } from '../../lib/seo/structuredData';

const homeEntry: CollectionEntry<'pagesEn'> | undefined = await getEntry('pagesEn', 'en/home');

if (!homeEntry) {
  return new Response('Home page content not found', { status: 404 });
}

const { data } = homeEntry;
const { Content } = await render(homeEntry);

const site = Astro.site ?? new URL('https://devisia.pro');
const breadcrumbs = breadcrumbListJsonLd({
  site,
  items: [{ name: 'Home', url: '/en/' }],
});
---

<Layout title={data.title} description={data.description} heroImage={data.heroImage} lang="en" structuredData={[breadcrumbs]}>
  <HomeHero
    lang="en"
    heroTitle={data.heroTitle ?? 'Developing intelligent vision'}
    heroSubtitle={data.heroSubtitle ?? 'Devisia builds SaaS products and custom software solutions.'}
    heroImage={data.heroImage}
  >
    <Content />
  </HomeHero>
</Layout>
