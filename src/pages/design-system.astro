---
import Layout from '../layouts/Layout.astro';
import Button from '../components/ui/Button.astro';
import Link from '../components/ui/Link.astro';
import Input from '../components/ui/Input.astro';
import Textarea from '../components/ui/Textarea.astro';
import Select from '../components/ui/Select.astro';
import Checkbox from '../components/ui/Checkbox.astro';
import Radio from '../components/ui/Radio.astro';
import Switch from '../components/ui/Switch.astro';
import Badge from '../components/ui/Badge.astro';
import Alert from '../components/ui/Alert.astro';
import Card from '../components/ui/Card.astro';
import Modal from '../components/ui/Modal.astro';
import Tabs from '../components/ui/Tabs.astro';
import Accordion from '../components/ui/Accordion.astro';
import Table from '../components/ui/Table.astro';
import Tooltip from '../components/ui/Tooltip.astro';
---

<Layout title="Design System" description="DEVISIA design system demo" lang="en">
  <div class="ds-container ds-stack" data-gap="lg" style="container-type: inline-size">
    <header class="ds-stack" data-gap="sm">
      <Badge tone="accent">DEVISIA</Badge>
      <h1 style="margin: 0">Design System</h1>
      <p class="ds-muted" style="max-width: 70ch">
        Production-ready tokens, components, and patterns for a calm, enterprise-grade UI. Vanilla CSS only.
      </p>

      <div class="ds-cluster">
        <Button variant="secondary" size="sm" type="button" class="theme-toggle" ariaLabel="Toggle theme">
          Toggle theme
        </Button>
        <Link href="#" variant="muted">Docs (repo)</Link>
      </div>
    </header>

    <section class="ds-stack">
      <h2>Wordmark</h2>
      <Card>
        <div class="ds-stack" data-gap="sm">
          <div style="font-weight: 500; letter-spacing: var(--ds-tracking-wordmark); text-transform: uppercase; font-size: var(--ds-text-3xl); color: var(--ds-color-primary)">
            DEVISIA
          </div>
          <div class="ds-muted">
            Typography-only wordmark: Inter Medium, uppercase, calm tracking. No effects, no gradients.
          </div>
        </div>
      </Card>
    </section>

    <section class="ds-stack">
      <h2>Buttons & Links</h2>
      <div class="ds-cluster">
        <Button variant="primary">Primary</Button>
        <Button variant="secondary">Secondary</Button>
        <Button variant="ghost">Ghost</Button>
        <Button variant="danger">Danger</Button>
        <Button variant="secondary" disabled>Disabled</Button>
      </div>
      <div class="ds-cluster">
        <Link href="https://example.com" target="_blank" rel="noreferrer">Accent link</Link>
        <Tooltip text="Tooltips appear on hover and focus">
          <span class="ds-link">Hover / focus me</span>
        </Tooltip>
      </div>
    </section>

    <section class="ds-stack">
      <h2>Form controls</h2>
      <div class="ds-grid" data-cols="2" style="container-type: inline-size">
        <Card>
          <div class="ds-stack" data-gap="sm">
            <Input id="ds-name" label="Name" placeholder="Inter Medium" hint="Use clear labels and hints." />
            <Select
              id="ds-status"
              label="Status"
              options={[
                { label: 'Active', value: 'active' },
                { label: 'Beta', value: 'beta' },
                { label: 'Archived', value: 'archived' },
              ]}
              value="active"
            />
            <Textarea id="ds-notes" label="Notes" placeholder="Calm, technical, minimal." />
          </div>
        </Card>
        <Card>
          <div class="ds-stack" data-gap="sm">
            <Checkbox id="ds-terms" label="I agree to the terms" />
            <Radio id="ds-radio-a" name="ds-radio" label="Option A" value="a" checked />
            <Radio id="ds-radio-b" name="ds-radio" label="Option B" value="b" />
            <Switch id="ds-switch" label="Enable feature" />
          </div>
        </Card>
      </div>
    </section>

    <section class="ds-stack">
      <h2>Badges, Alerts, Cards</h2>
      <div class="ds-cluster">
        <Badge>Neutral</Badge>
        <Badge tone="accent">Accent</Badge>
        <span class="ds-tag">Tag</span>
      </div>
      <div class="ds-grid" data-cols="2" style="container-type: inline-size">
        <Alert tone="info" title="Info">Short, calm message. No hype.</Alert>
        <Alert tone="warning" title="Warning" role="alert">Action required. Keep it explicit.</Alert>
      </div>
      <div class="ds-grid" data-cols="3" style="container-type: inline-size">
        <Card>
          <h3 style="margin-top: 0">Service</h3>
          <p class="ds-muted">Minimal card. Prefer borders and whitespace.</p>
          <div class="ds-cluster">
            <Badge tone="accent">CTA</Badge>
            <Link href="#" variant="muted">Learn more</Link>
          </div>
        </Card>
        <Card>
          <h3 style="margin-top: 0">Service</h3>
          <p class="ds-muted">Container queries can reshape layout when needed.</p>
          <Button variant="secondary" size="sm">Action</Button>
        </Card>
        <Card>
          <h3 style="margin-top: 0">Service</h3>
          <p class="ds-muted">Use Inter 400/500/600 for hierarchy.</p>
          <Button variant="ghost" size="sm">Action</Button>
        </Card>
      </div>
    </section>

    <section class="ds-stack">
      <h2>Tabs & Accordion</h2>
      <Tabs
        id="ds-tabs"
        tabs={[
          { id: 'one', label: 'Overview', content: 'Rational layout, calm motion, clear hierarchy.' },
          { id: 'two', label: 'Details', content: 'Prefer semantic HTML. Use tokens and low-specificity selectors.' },
          { id: 'three', label: 'A11y', content: 'WCAG AA baseline: focus-visible, contrast, keyboard access.' },
        ]}
      />
      <Accordion
        items={[
          { title: 'What is the brand tone?', content: 'Rational, minimal, enterprise-grade, technical.' },
          { title: 'Do we use Tailwind?', content: 'No. Vanilla CSS only, modern features, progressive enhancement.' },
        ]}
      />
    </section>

    <section class="ds-stack">
      <h2>Table, Breadcrumbs, Pagination</h2>
      <nav aria-label="Breadcrumb" class="ds-breadcrumb">
        <a href="#">Home</a><span aria-hidden="true">/</span>
        <a href="#">Library</a><span aria-hidden="true">/</span>
        <span aria-current="page">Design system</span>
      </nav>

      <Table caption="Example table">
        <thead>
          <tr>
            <th>Token</th>
            <th>Purpose</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>--ds-color-accent</code></td>
            <td>Links, focus rings, limited CTA</td>
            <td>#1FA2A6</td>
          </tr>
          <tr>
            <td><code>--ds-radius-3</code></td>
            <td>Cards and dialogs</td>
            <td>0.75rem</td>
          </tr>
        </tbody>
      </Table>

      <nav aria-label="Pagination" class="ds-pagination">
        <a href="#" aria-label="Previous page">Prev</a>
        <a href="#" aria-current="page">1</a>
        <a href="#">2</a>
        <a href="#">3</a>
        <a href="#" aria-label="Next page">Next</a>
      </nav>
    </section>

    <section class="ds-stack">
      <h2>Dialog</h2>
      <div class="ds-cluster">
        <Modal id="ds-modal" title="Example dialog" triggerLabel="Open dialog">
          <p class="ds-muted">
            This dialog uses native <code>&lt;dialog&gt;</code>. It is keyboard accessible and uses
            design tokens for surfaces, borders, and focus states.
          </p>
        </Modal>
      </div>
    </section>

    <section class="ds-stack">
      <h2>Example sections</h2>

      <Card>
        <div class="ds-stack" data-gap="sm">
          <h3 style="margin-top: 0">Hero</h3>
          <p class="ds-muted">
            Build calm, confident interfaces with disciplined typography and spacing.
          </p>
          <div class="ds-cluster">
            <Button variant="primary">Primary CTA</Button>
            <Button variant="secondary">Secondary</Button>
          </div>
        </div>
      </Card>

      <div class="ds-grid" data-cols="3" style="container-type: inline-size">
        <Card>
          <h3 style="margin-top: 0">Service card</h3>
          <p class="ds-muted">Short description with clear value.</p>
          <Button variant="ghost" size="sm">Learn</Button>
        </Card>
        <Card>
          <h3 style="margin-top: 0">Service card</h3>
          <p class="ds-muted">Subtle borders, minimal motion.</p>
          <Button variant="ghost" size="sm">Learn</Button>
        </Card>
        <Card>
          <h3 style="margin-top: 0">Service card</h3>
          <p class="ds-muted">Accessible by default.</p>
          <Button variant="ghost" size="sm">Learn</Button>
        </Card>
      </div>
    </section>

    <footer class="ds-muted" style="padding-bottom: var(--ds-space-10)">
      <small>Design system demo page. Built with Astro + modern vanilla CSS.</small>
    </footer>
  </div>
</Layout>

<script>
  // Theme toggle (localStorage + data-theme on <html>)
  const key = 'ds-theme';
  const root = document.documentElement;
  const apply = (t) => {
    if (!t) root.removeAttribute('data-theme');
    else root.setAttribute('data-theme', t);
  };

  // Apply saved preference on load
  apply(localStorage.getItem(key));

  const btn = document.querySelector('.theme-toggle');
  btn?.addEventListener('click', () => {
    const current = root.getAttribute('data-theme');
    const next = current === 'dark' ? 'light' : 'dark';
    apply(next);
    localStorage.setItem(key, next);
  });
</script>

